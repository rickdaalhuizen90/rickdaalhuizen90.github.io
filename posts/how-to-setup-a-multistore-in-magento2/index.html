<!doctype html><html><head><meta charset=utf-8><meta name=viewport content="width=device-width,initial-scale=1"><meta http-equiv=x-ua-compatible content="IE=edge,chrome=1"><title>Rick Daalhuizen | How to Setup a Multistore in Magento 2 |</title><meta http-equiv=x-ua-compatible content="IE=edge,chrome=1"><meta name=description content="An easy guide of what multistores are, the hierarchy of a multistore and how you can create them in Magento 2."><meta name=generator content="Hugo 0.83.1"><meta property="og:site_name" content="Rick Daalhuizen"><meta property="og:url" content="https://thenomadcoder.com/posts/how-to-setup-a-multistore-in-magento2/"><meta property="og:locale" content="en-us"><meta property="og:locale:alternate" content="en_US"><meta property="og:country-name" content="Indonesia"><meta property="og:email" content><meta property="og:title" content="How to Setup a Multistore in Magento 2"><meta property="og:type" content="article"><meta property="article:published_time" content="2020-07-28"><meta property="og:description" content="An easy guide of what multistores are, the hierarchy of a multistore and how you can create them in Magento 2."><meta property="og:url" content="https://thenomadcoder.com/posts/how-to-setup-a-multistore-in-magento2/"><meta property="og:site_name" content="Rick Daalhuizen"><meta property="og:image" content="https://thenomadcoder.com/posts/how-to-setup-a-multistore-in-magento2/banner_huf9fe651360a93178f48abf38f6568787_369787_1500x1500_fill_box_center_2.png"><meta property="og:image:alt" content="How to Setup a Multistore in Magento 2"><meta property="og:tags" content="Magento 2"><meta property="twitter:description" content="An easy guide of what multistores are, the hierarchy of a multistore and how you can create them in Magento 2."><meta property="twitter:title" content="How to Setup a Multistore in Magento 2"><meta property="twitter:image" content="https://thenomadcoder.com/posts/how-to-setup-a-multistore-in-magento2/banner_huf9fe651360a93178f48abf38f6568787_369787_1500x1500_fill_box_center_2.png"><meta name=google-site-verification content><meta name=application-name content="Rick Daalhuizen"><meta name=mobile-web-app-capable content="yes"><meta name=apple-mobile-web-app-capable content="yes"><meta name=apple-mobile-web-app-status-bar-style content="black"><meta name=apple-mobile-web-app-title content="Rick Daalhuizen"><link rel=icon sizes=16x16 href=favicon-16x16.png><link rel=icon sizes=32x32 href=favicon-32x32.png><link rel=icon sizes=192x192 href=android-chrome-192x192.png><link rel=icon sizes=512x512 href=android-chrome-512x512.png><link rel=apple-touch-icon href=apple-touch-icon.png><meta name=msapplication-TileColor content="#ff0000"><meta name=theme-color content="#ff0000"><link rel=author href=https://thenomadcoder.com/humans.txt><link rel=copyright href=https://thenomadcoder.com/copyright.html><meta name=monetization content="$ilp.uphold.com/PMDha7R3yZgG"><link href=https://thenomadcoder.com/index.xml rel=alternate type=application/rss+xml title="Rick Daalhuizen"><link rel=stylesheet href=https://unpkg.com/tachyons@4.12.0/css/tachyons.min.css><style>pre{overflow-x:auto;padding:1rem;border-radius:3px;box-shadow:inset 0 0 0 1px rgb(0 0 0/5%),0 2px 2px -1px rgb(0 0 0/.2)}code{font-size:1rem}</style></head><body class="sans-serif bg-near-white lh-copy"><main class="center w-100 mw7 pa2 mt5-l"><section class="flex flex-row-l flex-column-reverse"><article class="bb f5 w-100 w-75-l"><a href=https://thenomadcoder.com>Go Back</a><h1 class=ma0>How to Setup a Multistore in Magento 2</h1><p>It is possible to configure multiple instances in Magento.</p><p>Each instance can contain different attributes, including Languages, Domain names, Categories, Products, Currencies and more.</p><p>A Magento installation can have multiple websites that have multiple stores or store views.</p><h2 id=magento-2-multistore-hierarchy>Magento 2 multistore hierarchy</h2><p><strong>Global:</strong> At the top of the hierarchy. This is what you get when you install Magento. This includes all default configuration.</p><p><strong>Website:</strong> Magento installations begin with a single website which by default, is called Main Website. You can also set up multiple websites for a single installation, each with its own IP address and domain.</p><p><strong>Store:</strong> A single website can have multiple stores, each with its own main menu. The stores share the same product catalog, but can have a different selection of products and design. All stores under the same website share the same Admin and checkout.</p><p><strong>Store view:</strong> Each store that is available to customers is presented according to a specific view. Initially, a store has a single default view. Additional store views can be added to support different languages, or for other purposes. Customers can use the language chooser in the header to change the store view.</p><figure class="mh0 mv3 w-100"><img class=w-100 alt="Magento 2 multistore Diagram" srcset="/posts/how-to-setup-a-multistore-in-magento2/magento2-multi-store-diagram_hua15aa98d58fed52490154a24f793cdc5_154319_458x0_resize_box_2.png 458w,
/posts/how-to-setup-a-multistore-in-magento2/magento2-multi-store-diagram_hua15aa98d58fed52490154a24f793cdc5_154319_726x0_resize_box_2.png 726w,
/posts/how-to-setup-a-multistore-in-magento2/magento2-multi-store-diagram_hua15aa98d58fed52490154a24f793cdc5_154319_1200x0_resize_box_2.png 1200w" sizes=50vw src=https://thenomadcoder.com/posts/how-to-setup-a-multistore-in-magento2/magento2-multi-store-diagram_hua15aa98d58fed52490154a24f793cdc5_154319_458x0_resize_box_2.png></figure><h2 id=step-1-how-to-create-a-multistore>Step 1: How to create a multistore</h2><p>After we have set up a Magento shop, we can log in as admin in our shop. If you don&rsquo;t have an admin account yet, you can create one as follows:</p><div class=highlight><pre style=color:#f8f8f2;background-color:#272822;-moz-tab-size:2;-o-tab-size:2;tab-size:2><code class=language-zsh data-lang=zsh>bin/magento admin:user:create
</code></pre></div><p>As an example, let&rsquo;s take a website that sells Sport Drinks, as shown in the diagram above.</p><p>Go to Stores -> Settings -> All stores.</p><h2 id=create-a-new-website>Create a new Website</h2><p>Click on Create Website and enter the following:</p><ol><li>The name of your website</li><li>A unique code for your store</li><li>Sort is optional and defaults to 0, let&rsquo;s see how it is for now.</li></ol><figure class="mh0 mv3 w-100"><img class=w-100 alt="Magento 2 Create new Website" srcset="/posts/how-to-setup-a-multistore-in-magento2/magento2-create-new-website_hueaa6374e4f43c8bdea116ffb80f0fb36_35322_458x0_resize_box_2.png 458w,
/posts/how-to-setup-a-multistore-in-magento2/magento2-create-new-website_hueaa6374e4f43c8bdea116ffb80f0fb36_35322_726x0_resize_box_2.png 726w,
/posts/how-to-setup-a-multistore-in-magento2/magento2-create-new-website_hueaa6374e4f43c8bdea116ffb80f0fb36_35322_1200x0_resize_box_2.png 1200w" sizes=50vw src=https://thenomadcoder.com/posts/how-to-setup-a-multistore-in-magento2/magento2-create-new-website_hueaa6374e4f43c8bdea116ffb80f0fb36_35322_458x0_resize_box_2.png></figure><h2 id=create-a-new-store>Create a new store</h2><p>Click on Create Store and enter the following:</p><ol><li>Select website</li><li>Name of your Store</li><li>A unique code for your store</li><li>Root category, defaults to default</li></ol><figure class="mh0 mv3 w-100"><img class=w-100 alt="Magento 2 Create new Store" srcset="/posts/how-to-setup-a-multistore-in-magento2/magento2-create-new-store_hu84e285facbf416bcbafddf525ce66ebd_23982_458x0_resize_box_2.png 458w,
/posts/how-to-setup-a-multistore-in-magento2/magento2-create-new-store_hu84e285facbf416bcbafddf525ce66ebd_23982_726x0_resize_box_2.png 726w,
/posts/how-to-setup-a-multistore-in-magento2/magento2-create-new-store_hu84e285facbf416bcbafddf525ce66ebd_23982_1200x0_resize_box_2.png 1200w" sizes=50vw src=https://thenomadcoder.com/posts/how-to-setup-a-multistore-in-magento2/magento2-create-new-store_hu84e285facbf416bcbafddf525ce66ebd_23982_458x0_resize_box_2.png></figure><h3 id=create-a-new-store-view>Create a new store view</h3><p>Click on Create Store and enter the following:</p><ol><li>Select store</li><li>Name of your store view</li><li>A unique code for your store</li><li>Status enabled (self-explanatory)</li><li>Sort is optional and defaults to 0, let&rsquo;s see how it is for now.</li></ol><figure class="mh0 mv3 w-100"><img class=w-100 alt="Magento 2 Create new Store View" srcset="/posts/how-to-setup-a-multistore-in-magento2/magento2-create-new-store-view_huf74d2025ab5cb34ece8df65846ca0c2b_33105_458x0_resize_box_2.png 458w,
/posts/how-to-setup-a-multistore-in-magento2/magento2-create-new-store-view_huf74d2025ab5cb34ece8df65846ca0c2b_33105_726x0_resize_box_2.png 726w,
/posts/how-to-setup-a-multistore-in-magento2/magento2-create-new-store-view_huf74d2025ab5cb34ece8df65846ca0c2b_33105_1200x0_resize_box_2.png 1200w" sizes=50vw src=https://thenomadcoder.com/posts/how-to-setup-a-multistore-in-magento2/magento2-create-new-store-view_huf74d2025ab5cb34ece8df65846ca0c2b_33105_458x0_resize_box_2.png></figure><p>This is our result</p><figure class="mh0 mv3 w-100"><img class=w-100 alt="Magento 2 multistores" srcset="/posts/how-to-setup-a-multistore-in-magento2/magento2-multistores_hu3733bec70c726c9e1ab3b2056acf554a_44451_458x0_resize_box_2.png 458w,
/posts/how-to-setup-a-multistore-in-magento2/magento2-multistores_hu3733bec70c726c9e1ab3b2056acf554a_44451_726x0_resize_box_2.png 726w,
/posts/how-to-setup-a-multistore-in-magento2/magento2-multistores_hu3733bec70c726c9e1ab3b2056acf554a_44451_1200x0_resize_box_2.png 1200w" sizes=50vw src=https://thenomadcoder.com/posts/how-to-setup-a-multistore-in-magento2/magento2-multistores_hu3733bec70c726c9e1ab3b2056acf554a_44451_458x0_resize_box_2.png></figure><h2 id=method-1-configure-base-urls-from-admin>Method 1: Configure base urls from Admin</h2><p>Next we need to set our base url in Stores> Settings> Configuration> General> Web.</p><ol><li>Choose your store view at the top of the page for which you want to set your base url.</li><li>Complete the following fields<ol><li>Base URL: The baseurl of your store view.</li><li>Base Link URL: The base url for your link urls, usually the same as your baseurl.</li><li>Base URL for Static View Files (default value): Let&rsquo;s be default</li><li>Base URL for User Media Files (default value): Enter URL for media files. This is often the baseurl with / media / after it. If you are using a CDN, the url is to your CDN.</li></ol></li></ol><figure class="mh0 mv3 w-100"><img class=w-100 alt="Magento 2 Configure Base Url" srcset="/posts/how-to-setup-a-multistore-in-magento2/magento2-configure-base-url_hu213e91cba859ecbfc7896bbbe7dd3f60_78081_458x0_resize_box_2.png 458w,
/posts/how-to-setup-a-multistore-in-magento2/magento2-configure-base-url_hu213e91cba859ecbfc7896bbbe7dd3f60_78081_726x0_resize_box_2.png 726w,
/posts/how-to-setup-a-multistore-in-magento2/magento2-configure-base-url_hu213e91cba859ecbfc7896bbbe7dd3f60_78081_1200x0_resize_box_2.png 1200w" sizes=50vw src=https://thenomadcoder.com/posts/how-to-setup-a-multistore-in-magento2/magento2-configure-base-url_hu213e91cba859ecbfc7896bbbe7dd3f60_78081_458x0_resize_box_2.png></figure><h2 id=method-2-configuring-your-base-urls-using-ssh>Method 2: Configuring your base URL&rsquo;s using SSH</h2><div class=highlight><pre style=color:#f8f8f2;background-color:#272822;-moz-tab-size:2;-o-tab-size:2;tab-size:2><code class=language-zsh data-lang=zsh>bin/magento config:set web/unsecure/base_url <span style=color:#e6db74>&#34;http://app.sportnutrition.test/&#34;</span> <span style=color:#ae81ff>\
</span><span style=color:#ae81ff></span>    --scope<span style=color:#f92672>=</span>website <span style=color:#ae81ff>\
</span><span style=color:#ae81ff></span>    --scope-code<span style=color:#f92672>=</span>sportnutrition <span style=color:#ae81ff>\
</span><span style=color:#ae81ff></span>    -le

bin/magento config:set web/secure/base_url <span style=color:#e6db74>&#34;https://app.sportdrinks-nl.test/&#34;</span> <span style=color:#ae81ff>\
</span><span style=color:#ae81ff></span>    --scope<span style=color:#f92672>=</span>store <span style=color:#ae81ff>\
</span><span style=color:#ae81ff></span>    --scope-code<span style=color:#f92672>=</span>sportdrinks_nl <span style=color:#ae81ff>\
</span><span style=color:#ae81ff></span>    -le
</code></pre></div><h2 id=configure-the-server-to-load-the-storefront>Configure the server to load the storefront</h2><p>Now that we have created a new website for Magento we need to add it to our project. Make sure you are in developer mode.</p><div class=highlight><pre style=color:#f8f8f2;background-color:#272822;-moz-tab-size:2;-o-tab-size:2;tab-size:2><code class=language-zsh data-lang=zsh>bin/magento deploy:mode:set developer
</code></pre></div><p>There are several ways you can do this.</p><ul><li>Add the store code to your base URL, you don&rsquo;t need access to your server for this.</li><li>Create a subfolder with a .htaccess and index.php.</li><li>Using symlinks</li></ul><h2 id=method-1-add-the-store-code-to-your-base-url>Method 1: Add the store code to your base URL.</h2><p>Go to System -> Settings -> Configuration -> General -> Web</p><ol><li>Open the URL Options section:</li><li>Choose Yes in the Add Store Code as you need.</li></ol><p>URL with Store Code:
<a href=https://example.com/store-view/index.php/>https://example.com/store-view/index.php/</a></p><p>URL without Store Code:
<a href=https://example.com/index.php/>https://example.com/index.php/</a></p><h2 id=method-2-create-a-multistore-using-subfolder>Method 2: Create a multistore using subfolder</h2><p>Create a new folder in the root of your project and copy paste the .htaccess to your new folder.</p><div class=highlight><pre style=color:#f8f8f2;background-color:#272822;-moz-tab-size:2;-o-tab-size:2;tab-size:2><code class=language-zsh data-lang=zsh>mkdir -p &lt;new_site&gt; <span style=color:#f92672>&amp;&amp;</span> cp .htaccess &lt;new_site&gt;
</code></pre></div><p>Then you create an index.php:</p><div class=highlight><pre style=color:#f8f8f2;background-color:#272822;-moz-tab-size:2;-o-tab-size:2;tab-size:2><code class=language-php data-lang=php><span style=color:#f92672>&lt;?</span><span style=color:#a6e22e>php</span>
 
<span style=color:#66d9ef>require</span> <span style=color:#a6e22e>realpath</span>(<span style=color:#66d9ef>__DIR__</span>) <span style=color:#f92672>.</span> <span style=color:#e6db74>&#39;/../app/bootstrap.php&#39;</span>;
$params <span style=color:#f92672>=</span> $_SERVER;

$params[<span style=color:#a6e22e>\Magento\Store\Model\StoreManager</span><span style=color:#f92672>::</span><span style=color:#a6e22e>PARAM_RUN_CODE</span>] <span style=color:#f92672>=</span> <span style=color:#e6db74>&#39;&lt;code&gt;&#39;</span>;
$params[<span style=color:#a6e22e>\Magento\Store\Model\StoreManager</span><span style=color:#f92672>::</span><span style=color:#a6e22e>PARAM_RUN_TYPE</span>] <span style=color:#f92672>=</span> <span style=color:#e6db74>&#39;&lt;type&gt;&#39;</span>;
$bootstrap <span style=color:#f92672>=</span> <span style=color:#a6e22e>\Magento\Framework\App\Bootstrap</span><span style=color:#f92672>::</span><span style=color:#a6e22e>create</span>(<span style=color:#a6e22e>BP</span>, $params);

$app <span style=color:#f92672>=</span> $bootstrap<span style=color:#f92672>-&gt;</span><span style=color:#a6e22e>createApplication</span>(<span style=color:#e6db74>&#39;Magento\Framework\App\Http&#39;</span>);
$bootstrap<span style=color:#f92672>-&gt;</span><span style=color:#a6e22e>run</span>($app);
</code></pre></div><h2 id=method-3-create-a-multistore-with-symlinks>Method 3: Create a multistore with symlinks</h2><p>Use <em>ln -s &lt;target_dir></em> to create a symlink.</p><div class=highlight><pre style=color:#f8f8f2;background-color:#272822;-moz-tab-size:2;-o-tab-size:2;tab-size:2><code class=language-zsh data-lang=zsh>ln -s &lt;path_to_projet_root&gt;/app/ &lt;your_new_site&gt;app
ln -s &lt;path_to_projet_root&gt;/lib/ &lt;your_new_site&gt;lib
ln -s &lt;path_to_projet_root&gt;/pub/ &lt;your_new_site&gt;pub
ln -s &lt;path_to_projet_root&gt;/var/ &lt;your_new_site&gt;var
</code></pre></div><p>These were the steps to set up a multistore in Magento 2, in my next blog I will explain how you can configure your multistore locally with Docker and Warden.</p></article><aside class=w-25-l><div class=toc><nav id=TableOfContents><ul><li><a href=#magento-2-multistore-hierarchy>Magento 2 multistore hierarchy</a></li><li><a href=#step-1-how-to-create-a-multistore>Step 1: How to create a multistore</a></li><li><a href=#create-a-new-website>Create a new Website</a></li><li><a href=#create-a-new-store>Create a new store</a><ul><li><a href=#create-a-new-store-view>Create a new store view</a></li></ul></li><li><a href=#method-1-configure-base-urls-from-admin>Method 1: Configure base urls from Admin</a></li><li><a href=#method-2-configuring-your-base-urls-using-ssh>Method 2: Configuring your base URL&rsquo;s using SSH</a></li><li><a href=#configure-the-server-to-load-the-storefront>Configure the server to load the storefront</a></li><li><a href=#method-1-add-the-store-code-to-your-base-url>Method 1: Add the store code to your base URL.</a></li><li><a href=#method-2-create-a-multistore-using-subfolder>Method 2: Create a multistore using subfolder</a></li><li><a href=#method-3-create-a-multistore-with-symlinks>Method 3: Create a multistore with symlinks</a></li></ul></nav></div></aside></section><div class="list w-100"><h2 class="f3 mv3">Posts</h2><div class="f5 flex mb1 pa1 items-center dim"><time class="w-10 f6 fw4 mt0 mb0 black-60">11 Sep</time>
<a class="w-90 link black-90 f4" href=https://thenomadcoder.com/posts/moving-from-sequel-pro-to-sequel-ace/>Moving from Sequel Pro to Sequel Ace</a></div><div class="f5 flex mb1 pa1 items-center dim"><time class="w-10 f6 fw4 mt0 mb0 black-60">4 Sep</time>
<a class="w-90 link black-90 f4" href=https://thenomadcoder.com/posts/utilize-configuration-xml-and-variables-scope/>Utilize configuration XML and variables scope.</a></div><div class="f5 flex mb1 pa1 items-center dim"><time class="w-10 f6 fw4 mt0 mb0 black-60">19 Aug</time>
<a class="w-90 link black-90 f4" href=https://thenomadcoder.com/posts/understanding-magento-2-module-based-architecture/>Understanding Magento 2 Module-Based Architecture</a></div><div class="f5 flex mb1 pa1 items-center dim"><time class="w-10 f6 fw4 mt0 mb0 black-60">4 Aug</time>
<a class="w-90 link black-90 f4" href=https://thenomadcoder.com/posts/how-to-configure-a-magento-multi-store-in-docker/>How to Configure a Magento Multistore in Docker</a></div><div class="f5 flex mb1 pa1 items-center dim"><time class="w-10 f6 fw4 mt0 mb0 black-60">28 Jul</time>
<a class="w-90 link black-90 f4" href=https://thenomadcoder.com/posts/how-to-setup-a-multistore-in-magento2/>How to Setup a Multistore in Magento 2</a></div><div class="f5 flex mb1 pa1 items-center dim"><time class="w-10 f6 fw4 mt0 mb0 black-60">21 Jul</time>
<a class="w-90 link black-90 f4" href=https://thenomadcoder.com/posts/how-to-setup-a-magento-2-development-environment-with-docker/>How to Setup a Magento 2 Development Environment with Docker</a></div><div class="f5 flex mb1 pa1 items-center dim"><time class="w-10 f6 fw4 mt0 mb0 black-60">14 Jul</time>
<a class="w-90 link black-90 f4" href=https://thenomadcoder.com/posts/jazz-up-your-zsh-terminal-with-prezto/>Jazz Up your ZSH Terminal with Prezto</a></div><div class="f5 flex mb1 pa1 items-center dim"><time class="w-10 f6 fw4 mt0 mb0 black-60">7 Jul</time>
<a class="w-90 link black-90 f4" href=https://thenomadcoder.com/posts/setting-up-phpstorm-for-magento-2/>Setting up PhpStorm for Magento 2</a></div><div class="f5 flex mb1 pa1 items-center dim"><time class="w-10 f6 fw4 mt0 mb0 black-60">30 Jun</time>
<a class="w-90 link black-90 f4" href=https://thenomadcoder.com/posts/declarative-schema-overview-in-magento2-part-2/>Declarative Schema Overview in Magento 2 - Part 2</a></div><div class="f5 flex mb1 pa1 items-center dim"><time class="w-10 f6 fw4 mt0 mb0 black-60">23 Jun</time>
<a class="w-90 link black-90 f4" href=https://thenomadcoder.com/posts/declarative-schema-overview-in-magento2-part-1/>Declarative Schema Overview in Magento 2 - Part 1</a></div><div class="f5 flex mb1 pa1 items-center dim"><time class="w-10 f6 fw4 mt0 mb0 black-60">16 Jun</time>
<a class="w-90 link black-90 f4" href=https://thenomadcoder.com/posts/magento-2-module-development-with-pestle/>Magento 2 Module Development with Pestle</a></div></div></main><footer class="pv4 ph3 ph5-m ph6-l mid-gray"><small class="f6 db tc">© 2016 <b class=ttu>Rick Daalhuizen</b>, All Rights Reserved</small></footer></body></html>