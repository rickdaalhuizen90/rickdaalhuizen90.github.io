<!doctype html><html><head><meta charset=utf-8><meta name=viewport content="width=device-width,initial-scale=1"><meta http-equiv=x-ua-compatible content="IE=edge,chrome=1"><title>Rick Daalhuizen | Utilize configuration XML and variables scope. |</title><meta http-equiv=x-ua-compatible content="IE=edge,chrome=1"><meta name=description content="Magento 2 Exam Series - Magento Architecture & Customization Techniques: Determine how to use configuration files in Magento."><meta name=generator content="Hugo 0.83.1"><meta property="og:site_name" content="Rick Daalhuizen"><meta property="og:url" content="/posts/utilize-configuration-xml-and-variables-scope/"><meta property="og:locale" content="en-us"><meta property="og:locale:alternate" content="en_US"><meta property="og:country-name" content="Indonesia"><meta property="og:email" content><meta property="og:title" content="Utilize configuration XML and variables scope."><meta property="og:type" content="article"><meta property="article:published_time" content="2020-09-04"><meta property="og:description" content="Magento 2 Exam Series - Magento Architecture & Customization Techniques: Determine how to use configuration files in Magento."><meta property="og:url" content="/posts/utilize-configuration-xml-and-variables-scope/"><meta property="og:site_name" content="Rick Daalhuizen"><meta property="og:image" content="/posts/utilize-configuration-xml-and-variables-scope/banner_hu1cd45b92881a41669401e83bb25f94a7_2840752_1500x1500_fill_box_center_2.png"><meta property="og:image:alt" content="Utilize configuration XML and variables scope."><meta property="og:tags" content="Magento 2"><meta property="twitter:description" content="Magento 2 Exam Series - Magento Architecture & Customization Techniques: Determine how to use configuration files in Magento."><meta property="twitter:title" content="Utilize configuration XML and variables scope."><meta property="twitter:image" content="/posts/utilize-configuration-xml-and-variables-scope/banner_hu1cd45b92881a41669401e83bb25f94a7_2840752_1500x1500_fill_box_center_2.png"><meta name=google-site-verification content><meta name=application-name content="Rick Daalhuizen"><meta name=mobile-web-app-capable content="yes"><meta name=apple-mobile-web-app-capable content="yes"><meta name=apple-mobile-web-app-status-bar-style content="black"><meta name=apple-mobile-web-app-title content="Rick Daalhuizen"><link rel=icon sizes=16x16 href=favicon-16x16.png><link rel=icon sizes=32x32 href=favicon-32x32.png><link rel=icon sizes=192x192 href=android-chrome-192x192.png><link rel=icon sizes=512x512 href=android-chrome-512x512.png><link rel=apple-touch-icon href=apple-touch-icon.png><meta name=msapplication-TileColor content="#ff0000"><meta name=theme-color content="#ff0000"><link rel=author href=//humans.txt><link rel=copyright href=//copyright.html><meta name=monetization content="$ilp.uphold.com/PMDha7R3yZgG"><link href=/index.xml rel=alternate type=application/rss+xml title="Rick Daalhuizen"><link rel=stylesheet href=https://unpkg.com/tachyons@4.12.0/css/tachyons.min.css><style>pre{overflow-x:auto;padding:1rem;border-radius:3px;box-shadow:inset 0 0 0 1px rgb(0 0 0/5%),0 2px 2px -1px rgb(0 0 0/.2)}code{font-size:1rem}</style></head><body class="sans-serif bg-near-white lh-copy"><main class="center w-100 mw7 pa2 mt5-l"><section class="flex flex-row-l flex-column-reverse"><article class="bb f5 w-100 w-75-l"><a href=/>Go Back</a><h1 class=ma0>Utilize configuration XML and variables scope.</h1><p>Much of the configuration in Magento 2 is done by xml files, and placed in the <em>[Module_Root]/etc/</em> directory.
Depending on the <strong>scope</strong> of your configuration, place them in <em>etc/adminhtml</em>, <em>etc/frontend</em> or under <strong>global scope</strong> under <em>etc/</em>. When you put them in adminhtml or frontend, this overwrites the global scope.</p><h2 id=list-of-xml-config-files>List of XML config files.</h2><ul><li><em>acl.xml</em> - resource title, sort</li><li><em>adminhtml/rules/payment_{country}.xml</em> - paypal</li><li><em>address_formats.xml</em></li><li><em>address_types.xml</em> - format code and title only</li><li><em>cache.xml</em> - name, instance - e.g. full_page=Page Cache</li><li><em>catalog_attributes.xml</em> - catalog_category, catalog_product, unassignable, used_in_autogeneration, quote_item *</li><li><em>communication.xml</em></li><li><em>config.xml</em> - defaults</li><li><em>crontab.xml</em> - group[], job instance, method, schedule *</li><li><em>cron_groups.xml</em> *</li><li><em>di.xml</em> - preference, plugins, virtual type *</li><li><em>eav_attributes.xml</em> - locked entity attributes (global, unique etc.)</li><li><em>email_templates.xml</em> - id label file type module &ndash; view/frontend/email/name.html</li><li><em>events.xml</em> - observers, shared, disabled *</li><li><em>export.xml</em></li><li><em>extension_attributes.xml</em> - for, attribute code, attribute type</li><li><em>fieldset.xml</em></li><li><em>import.xml</em></li><li><em>indexer.xml</em> - class, view_id, title, description</li><li><em>integration.xml</em></li><li><em>integration/api.xml</em></li><li><em>integration/config.xml</em></li><li><em>menu.xml</em> - admin menu</li><li><em>module.xml</em> - version, sequence</li><li><em>mview.xml</em> - scheduled updates, subscribe to table changes, indexer model</li><li><em>page_types.xml</em></li><li><em>payment.xml</em> - groups, method allow_multiple_address</li><li><em>pdf.xml</em> - renders by type (invoice, shipment, creditmemo) and product type</li><li><em>product_types.xml</em> - label, model instance, index priority, (?) custom attributes, (!) composable types</li><li><em>product_options.xml</em></li><li><em>resources.xml</em></li><li><em>routes.xml</em></li><li><em>sales.xml</em> - collectors (quote, order, invoice, credit memo)</li><li><em>search_engine.xml</em></li><li><em>search_request.xml</em> - index, dimensions, queries, filters, aggregations, buckets</li><li><em>sections.xml</em> - action route placeholder -> invalidate customer sections</li><li><em>system.xml</em> - adminhtml config</li><li><em>validation.xml</em> - entity, rules, constraints -> class</li><li><em>view.xml</em> - vars by module</li><li><em>webapi.xml</em> - route, method, service class and method, resources</li><li><em>widget.xml</em> - class, email compatible, image, ttl (?), label, description, parameters</li><li><em>zip_codes.xml</em> - <a href=https://devdocs.magento.com/guides/v2.3/howdoi/checkout/checkout_zip.html>Add custom input mask for ZIP code</a></li></ul><h2 id=configuration-load-order>Configuration load order</h2><p>The load order of the configuration files start with <em>app/etc/di.xml</em>.First it&rsquo;s collecting configration files under <em>[Module_Root]etc/*.xml</em>, then under <em>[Module_Root]/etc/[Area]/*.xml</em>, and finally merges them together.</p><p>While merging the configuration files, it is checked whether the id attribute of an xml node is unique, otherwise it will be overwritten with all underlying content (child nodes).</p><p>When the same xml document (configuration file) contains multiple nodes with the same id, it will give an error. &ndash; <a href=https://devdocs.magento.com/guides/v2.2/config-guide/config/config-files.html>Magento DevDocs - Module configuration files</a></p><ol><li><strong>Config merger class</strong><ul><li>\Magento\Framework\Config\Dom</li></ul></li><li><strong>When merging each file</strong><ul><li>createConfigMerger|merge</li><li>\Magento\Framework\Config\Dom::_initDom(dom, perFileSchema)</li><li>\Magento\Framework\Config\Dom::validateDomDocument</li><li>$dom->schemaValidate</li></ul></li><li><strong>After everything is merged</strong><ul><li>\Magento\Framework\Config\Dom::validate(mergedSchema)</li><li>\Magento\Framework\Config\Dom::validateDomDocument</li></ul></li></ol><h2 id=environment-settings>Environment settings</h2><p>Magento 2 comes with a configuration file <em>app/etc/env.php</em> where you can store system-specific but also sensitive files, these can be API keys, passwords and personal information e.g. email or phone number. Sensitive data is not included during the export.</p><p>This file also contains your db data, crypt key to protect your passwords and other sensitive information (created during the Magento installation), backend frontName for your admin url and cache types.</p><p>To create a configuration you can do this as follows with <em>bin/magento</em>.</p><blockquote cite=http://example.com/facts class="mh0 mv3 pa3 bg-washed-blue outline shadow-1"><p>To see more options run <em>bin/magento config</em>, options for <strong>Magento 2.2.4 or higher</strong> may differ.</p></blockquote><p>Set non-sensitive configuration</p><div class=highlight><pre style=color:#e5e5e5;background-color:#000;-moz-tab-size:2;-o-tab-size:2;tab-size:2><code class=language-bash data-lang=bash>bin/magento config:set [--scope] [--scope-code] path value
</code></pre></div><p>Set sensitive configuration (writes to app/etc/env.php)</p><div class=highlight><pre style=color:#e5e5e5;background-color:#000;-moz-tab-size:2;-o-tab-size:2;tab-size:2><code class=language-bash data-lang=bash>bin/magento config:sensitive:set [--scope] [--scope-code] path value
</code></pre></div><p>Show saved configuration</p><div class=highlight><pre style=color:#e5e5e5;background-color:#000;-moz-tab-size:2;-o-tab-size:2;tab-size:2><code class=language-bash data-lang=bash>bin/magento config:show
</code></pre></div><p>Export configuration, let op: beschikt niet over gevoelige data!</p><div class=highlight><pre style=color:#e5e5e5;background-color:#000;-moz-tab-size:2;-o-tab-size:2;tab-size:2><code class=language-bash data-lang=bash>bin/magento app:config:dump
</code></pre></div><p>Example</p><div class=highlight><pre style=color:#e5e5e5;background-color:#000;-moz-tab-size:2;-o-tab-size:2;tab-size:2><code class=language-bash data-lang=bash>bin/magento config:set --scope=websites --scope-code=base web/unsecure/base_url http://example.com/
</code></pre></div><p>To find the right scope you can run the following sql query in your db:</p><div class=highlight><pre style=color:#e5e5e5;background-color:#000;-moz-tab-size:2;-o-tab-size:2;tab-size:2><code class=language-sql data-lang=sql><span style=color:#fff;font-weight:700>SELECT</span> * <span style=color:#fff;font-weight:700>FROM</span> store;
<span style=color:#fff;font-weight:700>SELECT</span> * <span style=color:#fff;font-weight:700>FROM</span> store_website;
</code></pre></div><p>With magerun:</p><div class=highlight><pre style=color:#e5e5e5;background-color:#000;-moz-tab-size:2;-o-tab-size:2;tab-size:2><code class=language-bash data-lang=bash>n98-magerun.phar db:query <span style=color:#0ff;font-weight:700>&#34;SELECT * FROM store;&#34;</span>
n98-magerun.phar db:query <span style=color:#0ff;font-weight:700>&#34;SELECT * FROM store_website;&#34;</span>
</code></pre></div><p>For more information, you can consult the following Magento documentation</p><ul><li><a href=https://devdocs.magento.com/guides/v2.2/config-guide/cli/config-cli-subcommands-config-mgmt-set.html>Set configuration values</a></li><li><a href=https://devdocs.magento.com/guides/v2.2/config-guide/prod/config-reference-sens.html>Sensitive and system-specific</a></li><li><a href=https://devdocs.magento.com/guides/v2.2/config-guide/prod/config-reference-most.html>Other configuration paths reference</a></li></ul></article><aside class=w-25-l><div class=toc><nav id=TableOfContents><ul><li><a href=#list-of-xml-config-files>List of XML config files.</a></li><li><a href=#configuration-load-order>Configuration load order</a></li><li><a href=#environment-settings>Environment settings</a></li></ul></nav></div></aside></section><div class="list w-100"><h2 class="f3 mv3">Posts</h2><div class="f5 flex mb1 pa1 items-center dim"><time class="w-10 f6 fw4 mt0 mb0 black-60">11 Sep</time>
<a class="w-90 link black-90 f4" href=/posts/moving-from-sequel-pro-to-sequel-ace/>Moving from Sequel Pro to Sequel Ace</a></div><div class="f5 flex mb1 pa1 items-center dim"><time class="w-10 f6 fw4 mt0 mb0 black-60">4 Sep</time>
<a class="w-90 link black-90 f4" href=/posts/utilize-configuration-xml-and-variables-scope/>Utilize configuration XML and variables scope.</a></div><div class="f5 flex mb1 pa1 items-center dim"><time class="w-10 f6 fw4 mt0 mb0 black-60">19 Aug</time>
<a class="w-90 link black-90 f4" href=/posts/understanding-magento-2-module-based-architecture/>Understanding Magento 2 Module-Based Architecture</a></div><div class="f5 flex mb1 pa1 items-center dim"><time class="w-10 f6 fw4 mt0 mb0 black-60">4 Aug</time>
<a class="w-90 link black-90 f4" href=/posts/how-to-configure-a-magento-multi-store-in-docker/>How to Configure a Magento Multistore in Docker</a></div><div class="f5 flex mb1 pa1 items-center dim"><time class="w-10 f6 fw4 mt0 mb0 black-60">28 Jul</time>
<a class="w-90 link black-90 f4" href=/posts/how-to-setup-a-multistore-in-magento2/>How to Setup a Multistore in Magento 2</a></div><div class="f5 flex mb1 pa1 items-center dim"><time class="w-10 f6 fw4 mt0 mb0 black-60">21 Jul</time>
<a class="w-90 link black-90 f4" href=/posts/how-to-setup-a-magento-2-development-environment-with-docker/>How to Setup a Magento 2 Development Environment with Docker</a></div><div class="f5 flex mb1 pa1 items-center dim"><time class="w-10 f6 fw4 mt0 mb0 black-60">14 Jul</time>
<a class="w-90 link black-90 f4" href=/posts/jazz-up-your-zsh-terminal-with-prezto/>Jazz Up your ZSH Terminal with Prezto</a></div><div class="f5 flex mb1 pa1 items-center dim"><time class="w-10 f6 fw4 mt0 mb0 black-60">7 Jul</time>
<a class="w-90 link black-90 f4" href=/posts/setting-up-phpstorm-for-magento-2/>Setting up PhpStorm for Magento 2</a></div><div class="f5 flex mb1 pa1 items-center dim"><time class="w-10 f6 fw4 mt0 mb0 black-60">30 Jun</time>
<a class="w-90 link black-90 f4" href=/posts/declarative-schema-overview-in-magento2-part-2/>Declarative Schema Overview in Magento 2 - Part 2</a></div><div class="f5 flex mb1 pa1 items-center dim"><time class="w-10 f6 fw4 mt0 mb0 black-60">23 Jun</time>
<a class="w-90 link black-90 f4" href=/posts/declarative-schema-overview-in-magento2-part-1/>Declarative Schema Overview in Magento 2 - Part 1</a></div><div class="f5 flex mb1 pa1 items-center dim"><time class="w-10 f6 fw4 mt0 mb0 black-60">16 Jun</time>
<a class="w-90 link black-90 f4" href=/posts/magento-2-module-development-with-pestle/>Magento 2 Module Development with Pestle</a></div></div></main><footer class="pv4 ph3 ph5-m ph6-l mid-gray"><small class="f6 db tc">© 2016 <b class=ttu>Rick Daalhuizen</b>, All Rights Reserved</small></footer></body></html>